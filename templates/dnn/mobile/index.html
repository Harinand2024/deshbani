{% extends 'base.html' %}
{% load static %}
{% block body %}
<!-- âœ… Hero Slider (GCC Slider) -->
<div class="container mt-5">
  <div class="trending-strip mb-2">
    <span class="trending-label">TRENDING</span>

    {% for Blog in trendpost|slice:"0:9" %}
      <a href="/{{ Blog.newsfrom.slug }}/{{ Blog.post_cat.sub_cat.cat_slug }}/{{ Blog.slug }}"
        class="trend-pill {% if forloop.first %}active{% endif %}">
        {{ Blog.post_title|truncatechars:22 }}
      </a>
    {% endfor %}
  </div>
  <div class="row pt-3">
    <!-- ================= LEFT SECTION (col-9): News Content ================= -->
    <div class="col-lg-9 col-md-12">

      <!-- ðŸŒ Slider + Two Ads Row -->
      <div class="row mb-4">
        <div class="card-header border-0 d-flex align-items-center p-3">
          <h6 class="mb-0 fw-bold ">Latest News</h6>
        </div>
        <!-- ðŸ“° Slider -->
        <div class="col-lg-6 col-md-12">
            <section class="dxbindia-slider">
              <div id="dxbindiaNewsCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="4000">

                <!-- Indicators -->
                <div class="carousel-indicators">
                  {% for news in LatestNews %}
                  <button type="button" data-bs-target="#dxbindiaNewsCarousel" data-bs-slide-to="{{ forloop.counter0 }}"
                    class="{% if forloop.first %}active{% endif %}"></button>
                  {% endfor %}
                </div>

                <!-- Slides -->
                <div class="carousel-inner rounded-4 overflow-hidden card-bg-dark shadow-sm">
                  {% for news in LatestNews %}
                  <div class="carousel-item {% if forloop.first %}active{% endif %}">
                    <div class="ratio ratio-16x9">
                      {% if news.video_file %}
                        <a href="/{{ news.newsfrom.slug }}/{{ news.post_cat.sub_cat.cat_slug }}/{{ news.slug }}">
                          <video class="w-100 h-100 object-fit-cover" preload="none" loop playsinline autoplay muted>
                            <source src="{{ news.video_file.url }}" type="video/mp4">
                            Your browser does not support the video tag.
                          </video>
                        </a>
                      {% else %}
                        <a href="/{{ news.newsfrom.slug }}/{{ news.post_cat.sub_cat.cat_slug }}/{{ news.slug }}">
                          <img src="{{ news.post_image.url }}" alt="{{ news.post_title }}" class="img-fluid w-100 h-100 object-fit-cover" loading="lazy">
                        </a>
                      {% endif %}
                    </div>

                    <div class="dxbindia-slide-overlay d-flex flex-column justify-content-end p-4">
                      <div class="d-flex align-items-center mb-2">
                        <span class="badge bg-danger me-2">Latest</span>
                        <span class="text-light small">{{ news.post_date }}</span>
                      </div>
                      <h5 class="text-white fw-semibold mb-4 text-truncate-2">
                        <a href="/{{ news.newsfrom.slug }}/{{ news.post_cat.sub_cat.cat_slug }}/{{ news.slug }}" class="text-white text-decoration-none">
                          {{ news.post_title|truncatechars:180 }}
                        </a>
                      </h5>
                    </div>
                  </div>
                  {% endfor %}
                </div>

                <!-- Controls -->
                <!-- <button class="carousel-control-prev" type="button" data-bs-target="#dxbindiaNewsCarousel" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon bg-dark rounded-circle p-3"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#dxbindiaNewsCarousel" data-bs-slide="next">
                  <span class="carousel-control-next-icon bg-dark rounded-circle p-3"></span>
                </button> -->

              </div>
            </section>
          </div>


      </div>

      <!-- ðŸŒŸ Top Stories + 2 More News -->
      <div class="row mb-4">
        <!-- Top Stories -->
        <div class="col-lg-4 col-md-6 mb-4">
          <div class="card-bg-dark shadow-sm border top-stories-widget h-100">
            <div class="card-header border-0 d-flex align-items-center p-1">
              <span class="me-2 text-danger fs-5">ðŸ”¥</span>
              <h6 class="mb-0 fw-bold">Top Stories</h6>
            </div>
            <div class="p-2">
              {% for Blog in trendpost|slice:"0:3" %}
              <div class="d-flex align-items-center mb-3 story-item">
                <a href="/{{ Blog.newsfrom.slug }}/{{ Blog.post_cat.sub_cat.cat_slug }}/{{ Blog.slug }}" class="me-2">
                  <img src="{{ Blog.post_image.url }}" alt="{{ Blog.post_title }}" class="rounded story-img"
                    loading="lazy">
                </a>
                <div class="flex-grow-1">
                  <a href="/{{ Blog.newsfrom.slug }}/{{ Blog.post_cat.sub_cat.cat_slug }}/{{ Blog.slug }}" class="text-decoration-none">
                    <div class="fw-semibold hover-title">{{ Blog.post_title|truncatechars:40 }}</div>
                  </a>
                  <div class=" small mt-1 d-flex align-items-center">
                    <span class="">{{ Blog.schedule_date }}</span>
                    <div class="mx-2" style="--custom-bottom: 0px; --custom-right: 0px;">
                      {% include 'share.html' with posts=post %}
                    </div>
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
          </div>
        </div>

        <!-- Two More News -->
        <div class="col-lg-8 col-md-6">
          <div class="row">
            <!-- News 3 -->
            <div class="col-md-6 mb-3">
              {% for Blog in trendpost|slice:"3:4" %}
              <div class="card-bg-dark shadow-sm border rounded h-100">
                <a href="/{{ Blog.newsfrom.slug }}/{{ Blog.post_cat.sub_cat.cat_slug }}/{{ Blog.slug }}">
                  <img src="{{ Blog.post_image.url }}" alt="{{ Blog.post_title }}" class="rounded-top img-fluid"
                    loading="lazy">
                </a>
                <div class="py-3 px-2">
                  <a href="/{{ Blog.newsfrom.slug }}/{{ Blog.post_cat.sub_cat.cat_slug }}/{{ Blog.slug }}" class="text-decoration-none">
                    <div class="fw-semibold small hover-title">{{ Blog.post_title|truncatechars:110 }}</div>
                  </a>
                  <div class="small mt-2 d-flex align-items-center">
                    <span class="">{{ Blog.schedule_date }}</span>
                    <div class="mx-2" style="--custom-bottom: 0px; --custom-right: 0px;">
                      {% include 'share.html' with posts=post %}
                    </div>
                  </div>

                </div>
              </div>
              {% endfor %}
            </div>

            <!-- News 4 -->
            <div class="col-md-6">
              {% for Blog in trendpost|slice:"4:5" %}
              <div class="card-bg-dark shadow-sm border rounded h-100">
                <a href="/{{ Blog.newsfrom.slug }}/{{ Blog.post_cat.sub_cat.cat_slug }}/{{ Blog.slug }}">
                  <img src="{{ Blog.post_image.url }}" alt="{{ Blog.post_title }}" class="rounded-top img-fluid"
                    loading="lazy">
                </a>
                <div class="py-3 px-2">
                  <a href="/{{ Blog.newsfrom.slug }}/{{ Blog.post_cat.sub_cat.cat_slug }}/{{ Blog.slug }}" class="text-decoration-none">
                    <div class="fw-semibold small hover-title">{{ Blog.post_title|truncatechars:110 }}</div>
                  </a>
                  <div class="small mt-2 d-flex align-items-center">
                    <span class="">{{ Blog.schedule_date }}</span>
                    <div class="mx-2" style="--custom-bottom: 0px; --custom-right: 0px;">
                      {% include 'share.html' with posts=post %}
                    </div>
                  </div>

                </div>
              </div>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>

      <!-- ðŸŒŸ Top Breaking News + 2 More News -->
      <div class="row mb-4">
        <!-- Top Stories -->
        <div class="col-lg-4 col-md-6">
          <div class="card-bg-dark shadow-sm border top-stories-widget h-100">
            <div class="card-header border-0 d-flex align-items-center p-1">
              <span class="me-2 text-danger fs-5">ðŸ”¥</span>
              <h6 class="mb-0 fw-bold">Breaking News</h6>
            </div>
            <div class="p-2">
              {% for Blog in bnews|slice:"0:3" %}
              <div class="d-flex align-items-center mb-3 story-item">
                <a href="/{{ Blog.newsfrom.slug }}/{{ Blog.post_cat.sub_cat.cat_slug }}/{{ Blog.slug }}" class="me-2">
                  <img src="{{ Blog.post_image.url }}" alt="{{ Blog.post_title }}" class="rounded story-img"
                    loading="lazy">
                </a>
                <div class="flex-grow-1">
                  <a href="/{{ Blog.newsfrom.slug }}/{{ Blog.post_cat.sub_cat.cat_slug }}/{{ Blog.slug }}" class="text-decoration-none">
                    <div class="fw-semibold hover-title">{{ Blog.post_title|truncatechars:40 }}</div>
                  </a>
                  <div class="small mt-1 d-flex align-items-center">
                    <span class="">{{ Blog.schedule_date }}</span>
                    <div class="mx-2" style="--custom-bottom: 0px; --custom-right: 0px;">
                      {% include 'share.html' with posts=Blog %}
                    </div>
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
          </div>
        </div>

        <!-- Two More News -->
        <div class="col-lg-8 col-md-6">
          <div class="row">
            <!-- News 3 -->
            <div class="col-md-6">
              {% for Blog in bnews|slice:"3:4" %}
              <div class="card-bg-dark shadow-sm border rounded h-100">
                <a href="/{{ Blog.newsfrom.slug }}/{{ Blog.post_cat.sub_cat.cat_slug }}/{{ Blog.slug }}">
                  <img src="{{ Blog.post_image.url }}" alt="{{ Blog.post_title }}" class="rounded-top img-fluid"
                    loading="lazy">
                </a>
                <div class="py-3 px-2">
                  <a href="/{{ Blog.newsfrom.slug }}/{{ Blog.post_cat.sub_cat.cat_slug }}/{{ Blog.slug }}" class="text-decoration-none">
                    <div class="fw-semibold small hover-title">{{ Blog.post_title|truncatechars:110 }}</div>
                  </a>
                  <div class="small mt-2 d-flex align-items-center">
                    <span class="">{{ Blog.schedule_date }}</span>
                    <div class="mx-2" style="--custom-bottom: 0px; --custom-right: 0px;">
                      {% include 'share.html' with posts=Blog %}
                    </div>
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>

            <!-- News 4 -->
            <div class="col-md-6">
              {% for Blog in bnews|slice:"4:5" %}
              <div class="card-bg-dark shadow-sm border rounded h-100">
                <a href="/{{ Blog.newsfrom.slug }}/{{ Blog.post_cat.sub_cat.cat_slug }}/{{ Blog.slug }}">
                  <img src="{{ Blog.post_image.url }}" alt="{{ Blog.post_title }}" class="rounded-top img-fluid"
                    loading="lazy">
                </a>
                <div class="py-3 px-2">
                  <a href="/{{ Blog.newsfrom.slug }}/{{ Blog.post_cat.sub_cat.cat_slug }}/{{ Blog.slug }}" class="text-decoration-none">
                    <div class="fw-semibold small hover-title">{{ Blog.post_title|truncatechars:110 }}</div>
                  </a>
                  <div class="small mt-2 d-flex align-items-center">
                    <span class="">{{ Blog.schedule_date }}</span>
                    <div class="mx-2" style="--custom-bottom: 0px; --custom-right: 0px;">
                      {% include 'share.html' with posts=Blog %}
                    </div>
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>


    </div>

    <!-- ================= RIGHT SECTION (col-3): Ads Sidebar ================= -->
    <div class="col-lg-3 col-md-12">
      <!-- Top Stories -->

      <div class="card-bg-dark shadow-sm border rounded top-stories-widge mb-3">
        <div class="card-header border-0 d-flex align-items-center p-1">
          <span class="me-2 text-danger fs-5">ðŸ”¥</span>
          <h6 class="mb-0 fw-bold">Top Headline</h6>
        </div>
        <div class="p-2">
          {% for Blog in headline|slice:"0:3" %}
          <div class="d-flex align-items-center mb-3 story-item">
            <a href="/{{ Blog.newsfrom.slug }}/{{ Blog.post_cat.sub_cat.cat_slug }}/{{ Blog.slug }}" class="me-2">
              <img src="{{ Blog.post_image.url }}" alt="{{ Blog.post_title }}" class="rounded story-img" loading="lazy">
            </a>
            <div class="flex-grow-1">
              <a href="/{{ Blog.newsfrom.slug }}/{{ Blog.post_cat.sub_cat.cat_slug }}/{{ Blog.slug }}" class="text-decoration-none">
                <div class="fw-semibold hover-title">{{ Blog.post_title|truncatechars:40 }}</div>
              </a>
              <div class=" small mt-1 d-flex align-items-center">
                <span class="">{{ Blog.schedule_date }}</span>
                <div class="mx-2" style="--custom-bottom: 0px; --custom-right: 0px;">
                  {% include 'share.html' with posts=post %}
                </div>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>

      <aside class="ads-sidebar">
        <div class="card-bg-dark shadow-sm border rounded  text-center p-2 my-3 ">
          <p class="small">ADVERTISEMENT</p>
          <img src="" alt="Ad" class="img-fluid rounded">
        </div>
      </aside>
    </div>
  </div>
</div>

<!-- ARTICLES SECTION: MOBILE ONLY -->
<section class="d-block d-md-none py-2">
  <div class="container-fluid">
    <div class="text-center mb-2">
      <h5 class="mb-0 newsten-title py-2">Top Articles</h5>
    </div>

    <!-- Slider -->
    <div class="owl-carousel article-slider">
      {% for article in Articale %}
      <div class="article-card me-2">
        <div class="post-media">
          {% if article.video_file %}
          <video preload="none" loop playsinline autoplay muted class="rounded w-100"
            style="height:160px; object-fit:cover;">
            <source src="{{ article.video_file.url }}" type="video/mp4">
          </video>
          {% else %}
          <a href="/{{ article.newsfrom.slug }}/{{ article.post_cat.sub_cat.cat_slug }}/{{ article.slug }}" class="text-dark text-decoration-none">
            <img src="{{ article.post_image.url }}" alt="{{ article.post_title }}" title="{{ article.post_title }}"
              loading="lazy" class="rounded w-100" style="height:160px; object-fit:cover;">
          </a>
          {% endif %}
        </div>
        <h6 class="mt-2 small text-truncate">
          <a href="/{{ article.newsfrom.slug }}/{{ article.post_cat.sub_cat.cat_slug }}/{{ article.slug }}" class="text-dark text-decoration-none">
            {{ article.post_title|truncatechars:70 }}
          </a>
        </h6>
      </div>
      {% endfor %}
    </div>
  </div>
   <div class="col-md-12 mt-2">
     
      {% include 'popular-videos.html' %} 

       <div class="card-bg-dark shadow-sm border rounded  text-center p-2 my-3 ">
          <p class="small">ADVERTISEMENT</p>
          <img src="" alt="Ad" class="img-fluid rounded">
        </div>
    </div>
</section>


<!-- News Tabs Section -->
<div class="container my-4">
  <div class="row">
    <!-- âœ… MAIN CONTENT -->
    <div class="col-md-9 mb-3">

      <!-- ðŸ”¹ Tabs with scroll + arrows -->
      <div class="tabs-wrapper border-bottom mb-3 pb-2 position-relative">

        <!-- Left Arrow -->
        <button class="scroll-btn left" id="scrollLeft" aria-label="Scroll Left">
          <i class="fas fa-chevron-left"></i>
        </button>

        <!-- Tabs Container -->
        <div class="tabs-scroll-container" id="tabsScrollContainer">
          <ul class="nav slick-tabs flex-nowrap" id="categoryTab" role="tablist">
            {% for category, subcat_data in grouped_postsdata2.items %}
            <li class="" role="presentation">
              <button class="nav-link {% if forloop.first %}active{% endif %}"
                id="tab-{{ category.cat_slug }}"
                data-bs-toggle="tab"
                data-bs-target="#pane-{{ category.cat_slug }}"
                type="button"
                role="tab">
                {{ category.cat_name }}
              </button>
            </li>
            {% endfor %}
          </ul>
        </div>

        <!-- Right Arrow -->
        <button class="scroll-btn right" id="scrollRight" aria-label="Scroll Right">
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>

      <!-- ðŸ”¹ Category Content -->
      <div class="tab-content mt-3" id="categoryTabContent">
        {% for category, subcat_data in grouped_postsdata2.items %}
        {% with subcat_data.posts as posts %}
        {% if posts|length >= 6 %}
        <div class="tab-pane fade {% if forloop.first %}show active{% endif %}" id="pane-{{ category.cat_slug }}"
          role="tabpanel">

          <!-- ðŸ“° Top Section -->
          <div class="row g-3 align-items-stretch">

            <!-- Left Big News -->
            {% with posts.0 as post %}
            <div class="col-lg-6 col-md-12">
              <div class="news-card big-card h-100">
                <a href="/{{ post.newsfrom.slug }}/{{ post.post_cat.sub_cat.cat_slug }}/{{ post.slug }}">
                  <img src="{{ post.post_image.url }}" alt="{{ post.post_title }}" class="img-fluid rounded-3 w-100"
                    loading="lazy">
                </a>
                <div class="p-3">
                  <h5 class="fw-bold mb-2 lh-sm">
                    <a href="/{{ post.newsfrom.slug }}/{{ post.post_cat.sub_cat.cat_slug }}/{{ post.slug }}" class="text-decoration-none hover-red">
                      {{ post.post_title|truncatechars:120 }}
                    </a>
                  </h5>
                  <p class="small mb-2">
                    {{ post.post_description|truncatechars:160 }}
                  </p>
                  <div class="meta-info d-flex align-items-center gap-2 small">
                    <span>{{ post.schedule_date|date:"M d, Y" }}</span>
                  </div>
                </div>
              </div>
            </div>
            {% endwith %}

            <!-- Right 4 Small News -->
            <div class="col-lg-6 col-md-12">
              <div class="row g-3">
                {% for post in posts|slice:"1:5" %}
                <div class="col-md-12">
                  <div class="news-card mini-card h-100">
                    <a href="/{{ post.newsfrom.slug }}/{{ post.post_cat.sub_cat.cat_slug }}/{{ post.slug }}">
                      <img src="{{ post.post_image.url }}" alt="{{ post.post_title }}" class="img-fluid rounded-3 mb-2"
                        loading="lazy">
                    </a>
                    <h6 class="fw-semibold mb-1 lh-sm">
                      <a href="/{{ post.newsfrom.slug }}/{{ post.post_cat.sub_cat.cat_slug }}/{{ post.slug }}" class="text-decoration-none hover-red">
                        {{ post.post_title|truncatechars:70 }}
                      </a>
                    </h6>
                  </div>
                </div>
                {% endfor %}
              </div>
            </div>
          </div>

          <!-- ðŸ“° More News Grid -->
          <div class="row g-3 mt-3">
            {% for post in posts %}
            <div class="col-lg-4 col-md-6">
              <div class="news-card h-100">
                <a href="/{{ post.newsfrom.slug }}/{{ post.post_cat.sub_cat.cat_slug }}/{{ post.slug }}">
                  <img src="{{ post.post_image.url }}" alt="{{ post.post_title }}" class="img-fluid rounded-3 mb-2"
                    loading="lazy">
                </a>
                <h6 class="fw-semibold mb-1 lh-sm">
                  <a href="/{{ post.newsfrom.slug }}/{{ post.post_cat.sub_cat.cat_slug }}/{{ post.slug }}" class="text-decoration-none hover-red">
                    {{ post.post_title|truncatechars:80 }}
                  </a>
                </h6>
                <div class="meta-info small">
                  {{ post.schedule_date|date }}
                </div>
              </div>
            </div>
            {% endfor %}
          </div>

        </div>
        {% endif %}
        {% endwith %}
        {% endfor %}
      </div>
    </div>

    <!-- âœ… RIGHT SIDEBAR -->
    <div class="col-lg-3 col-md-12 col-sm-12">
      {% include 'reels-news.html' %}

      
    </div>
  </div>
</div>

<!-- Video News Section -->
<div class="col-lg-8 col-md-12 col-sm-12 py-4 bg-white mb-5">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h5 class="fw-bold text-uppercase m-0">Video News</h5>
    <a href="/all-video-news/all" class="text-btn text-decoration-none fw-semibold">View All</a>
  </div>
  <div class="slider-container-top">
    <div class="main-swiper">
      <div class="swiper-wrapper">
        {% for CatVid in videos %}
        <div class="swiper-slide">
          <a href="/video/{{CatVid.slug}}">
            <img class="rounded" src="https://img.youtube.com/vi/{{CatVid.video_url}}/hqdefault.jpg"
              alt="{{CatVid.video_title}}" title="{{CatVid.video_title}}" loading="lazy" width="709" height="463" />
          </a>
          <div class="dxv-overlay">
            <span class="category">{{ CatVid.News_Category }}</span>
            <a href="/video/{{CatVid.slug}}">
              <h6 class="text-btn">{{ CatVid.video_title }}</h6>
            </a>
          </div>
        </div>
        {% endfor %}
      </div>
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
    </div>
  </div>
</div>




<!-- jQuery & Owl Carousel -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>

<!-- Owl Carousel CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />
<link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css" />

<script>
  $(document).ready(function () {
    // Article slider
    $('.article-slider').owlCarousel({
      loop: true,
      margin: 10,
      autoplay: true,
      autoplayTimeout: 3000,
      autoplayHoverPause: true,
      dots: false,
      nav: false,
      responsive: {
        0: { items: 1.2 },
        400: { items: 1.5 },
        576: { items: 2 }
      }
    });

    // Hero slides
    $(".hero-slides").owlCarousel({
      items: 1,
      loop: true,
      autoplay: true,
      autoplayTimeout: 5000,
      autoplayHoverPause: true,
      nav: true,
      dots: false,
      navText: ["<i class='fas fa-chevron-left'></i>", "<i class='fas fa-chevron-right'></i>"] // optional
    });
  });
</script>
<script>
  let players = [];
  let swiper;

  // âœ… YouTube API Ready
  function onYouTubeIframeAPIReady() {
    const iframes = document.querySelectorAll('.video-iframe');
    iframes.forEach((iframe, index) => {
      players[index] = new YT.Player(iframe, {
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange
        }
      });
    });
  }

  // âœ… Pause all at start, play first muted
  function onPlayerReady(event) {
    players.forEach(player => player && player.pauseVideo());
    if (players[0]) {
      players[0].mute();
      players[0].playVideo();
    }
  }

  // âœ… On video end â†’ move to next slide
  function onPlayerStateChange(event) {
    if (event.data === YT.PlayerState.ENDED) {
      // ðŸ›  Added safety check
      if (typeof swiper !== "undefined" && swiper.slideNext) {
        goToNextSlide();
      }
    }
  }

  // âœ… Safe next slide
  function goToNextSlide() {
    if (!swiper) return;
    swiper.slideNext();
    playCurrentSlideVideo();
  }

  // âœ… Safe prev slide
  function goToPrevSlide() {
    if (!swiper) return;
    swiper.slidePrev();
    playCurrentSlideVideo();
  }

  // âœ… Play only active slideâ€™s video
  function playCurrentSlideVideo() {
    const currentIndex = swiper ? swiper.realIndex : 0;
    players.forEach(p => p && p.pauseVideo && p.pauseVideo());
    setTimeout(() => {
      if (players[currentIndex]) {
        players[currentIndex].mute();
        players[currentIndex].playVideo();
      }
    }, 500);
  }

  // âœ… Initialize Swiper safely after DOM load
  document.addEventListener('DOMContentLoaded', function () {
    swiper = new Swiper('.trending-swiper', {
      loop: true,
      autoplay: false,
      on: {
        slideChange: playCurrentSlideVideo
      }
    });

    // Buttons (only if exist)
    const nextBtn = document.getElementById('skipBtn');
    const prevBtn = document.getElementById('prevBtn');

    if (nextBtn) nextBtn.addEventListener('click', goToNextSlide);
    if (prevBtn) prevBtn.addEventListener('click', goToPrevSlide);
  });
</script>
<script>
document.addEventListener("DOMContentLoaded", function() {
  const scrollContainer = document.querySelector('.trending-items-container');
  const leftBtn = document.querySelector('.scroll-btn.left-btn');
  const rightBtn = document.querySelector('.scroll-btn.right-btn');
  let autoScroll;

  // ðŸ§­ Function to check overflow and toggle arrows
  function checkOverflow() {
    if (scrollContainer.scrollWidth > scrollContainer.clientWidth) {
      leftBtn.style.display = 'block';
      rightBtn.style.display = 'block';
    } else {
      leftBtn.style.display = 'none';
      rightBtn.style.display = 'none';
    }
  }

  // Manual scroll buttons
  leftBtn.addEventListener('click', () => {
    scrollContainer.scrollBy({ left: -200, behavior: 'smooth' });
  });
  rightBtn.addEventListener('click', () => {
    scrollContainer.scrollBy({ left: 200, behavior: 'smooth' });
  });

  // Auto-scroll
  function startAutoScroll() {
    autoScroll = setInterval(() => {
      scrollContainer.scrollBy({ left: 1, behavior: 'smooth' });
      if (scrollContainer.scrollLeft + scrollContainer.clientWidth >= scrollContainer.scrollWidth - 1) {
        scrollContainer.scrollTo({ left: 0, behavior: 'smooth' });
      }
    }, 30);
  }
  function stopAutoScroll() { clearInterval(autoScroll); }

  // Start + hover pause
  startAutoScroll();
  scrollContainer.addEventListener('mouseenter', stopAutoScroll);
  scrollContainer.addEventListener('mouseleave', startAutoScroll);

  // âœ… Initial + responsive check
  checkOverflow();
  window.addEventListener('resize', checkOverflow);
});
</script>


<script>
document.addEventListener("DOMContentLoaded", function () {
  const scrollContainer = document.getElementById("tabsScrollContainer");
  const leftBtn = document.getElementById("scrollLeft");
  const rightBtn = document.getElementById("scrollRight");

  leftBtn.addEventListener("click", () => {
    scrollContainer.scrollBy({ left: -200, behavior: "smooth" });
  });

  rightBtn.addEventListener("click", () => {
    scrollContainer.scrollBy({ left: 200, behavior: "smooth" });
  });
});
</script>
<style>
  /* Slider */
  .gcc-slider {
    height: 50vh;
    position: relative;
    margin-top: 57px;
  }

  .single-hero-slide {
    background-size: cover;
    background-position: center center;
    height: 50vh;
    position: relative;
  }

  .dark-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0));
    z-index: 1;
  }

  .slide-content {
    position: relative;
    z-index: 2;
    color: white;
    padding-bottom: 30px;
  }

  .post-catagory {
    background: #e60000;
    color: #fff;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .post-title {
    font-size: 1rem;
    font-weight: 600;
    color: #fff;
    line-height: 1.3;
  }

  .post-meta {
    font-size: 14px;
    color: #ddd;
  }

  .gcc-slider .owl-nav button {
    position: absolute;
    top: 45%;
    background: rgba(255, 255, 255, 0.3);
    border: none;
    font-size: 28px;
    padding: 6px 12px;
    border-radius: 50%;
    transition: 0.3s;
    color: #fff;
  }

  .gcc-slider .owl-nav button:hover {
    background: rgba(255, 255, 255, 0.6);
    color: #000;
  }

  .gcc-slider .owl-nav .owl-prev {
    left: 15px;
  }

  .gcc-slider .owl-nav .owl-next {
    right: 15px;
  }

  .scrollable-tabs {
    overflow-x: auto;
    -ms-overflow-style: none;
    /* IE and Edge */
    scrollbar-width: none;
    /* Firefox */

  }

  .scrollable-tabs::-webkit-scrollbar {
    display: none;
    /* Chrome, Safari, Opera */
  }

  .scrollable-tabs ul.nav {
    gap: 0.5rem;
    flex-wrap: nowrap;

  }

  .scrollable-tabs .nav-link {
    border: none;
    padding: 0px;
    color: #000;
    font-weight: 500;
    transition: all 0.3s ease;
    white-space: nowrap;
  }

  .scrollable-tabs .nav-link:hover {
    background-color: #fff;
  }

  .scrollable-tabs .nav-link.active {
    color: #000;
    font-weight: 600;
    position: relative;


  }

  .scrollable-tabs .nav-link.active::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 0;
    width: 100%;
    height: 2px;
    background-color: red;
    border-radius: 0px;
  }

  .subcat-header {

    padding: 12px 15px;

  }

  .subcat-header h5 {
    font-size: 1.1rem;
  }

  .subcat-header small {
    font-size: 0.85rem;
    color: #9b9b9b !important;
  }

  /* Links */
  .subcat-links a.subcat-link {
    color: #0b4ecb !important;
    text-decoration: none;
    font-size: 0.9rem;
    padding: 2px 6px;
    transition: 0.2s;
  }

  .subcat-links a.subcat-link:hover {
    color: #fff;
  }

  /* Dropdown styling */
  .dropdown-content {
    display: none;
    position: absolute;
    background-color: #fff;
    min-width: 120px;
    z-index: 10;
    border-radius: 6px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
  }

  .dropdown-content a {
    color: #0b4ecb !important;
    padding: 6px 10px;
    display: block;
    text-decoration: none;
    transition: 0.2s;
  }

  .dropdown-content a:hover {
    background-color: #383838;
    color: #fff;
  }

  .dropdown:hover .dropdown-content {
    display: block;
  }


  .tabs-wrapper {
    border-bottom: 1px solid #e6e6e6;
    /* thin gray bottom line */
    padding-bottom: 10px;
    margin-bottom: 16px;
  }

  /* container for tabs: centered, wrap if needed */
  .slick-tabs {
    display: flex;
    justify-content: space-around;
    align-items: center;
    flex-wrap: wrap;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  /* tab button style */
  .slick-tabs .nav-link {
    position: relative;
    border: none;
    background: transparent;
    color: #555555;
    font-weight: 600;
    font-size: 15.5px;
    padding: 6px 8px;
    transition: color 180ms ease, transform 180ms ease;
    border-radius: 4px;
    text-transform: none;
  }

  /* small hover lift + color */
  .slick-tabs .nav-link:hover {
    color: #c41e1e;
    transform: translateY(-2px);
  }

  /* active tab color */
  .slick-tabs .nav-link.active {
    color: #d32f2f;
    font-weight: 700;
  }

  /* animated underline on active */
  .slick-tabs .nav-link::after {
    content: "";
    position: absolute;
    left: 50%;
    transform: translateX(-50%) scaleX(0);
    bottom: -10px;
    width: 60%;
    height: 3px;
    background: #d32f2f;
    border-radius: 3px;
    transition: transform 250ms cubic-bezier(.2, .8, .2, 1), opacity 200ms;
    opacity: 0;
  }

  /* show underline for active */
  .slick-tabs .nav-link.active::after {
    transform: translateX(-50%) scaleX(1);
    opacity: 1;
  }

  /* hover underline (thin) that animates in */
  .slick-tabs .nav-link:hover::before {
    content: "";
    position: absolute;
    left: 50%;
    transform: translateX(-50%) scaleX(0);
    bottom: -10px;
    width: 50%;
    height: 2px;
    background: rgba(196, 30, 30, 0.25);
    border-radius: 3px;
    transition: transform 250ms cubic-bezier(.2, .8, .2, 1), opacity 200ms;
    opacity: 1;
  }

  .slick-tabs .nav-link:hover::before {
    transform: translateX(-50%) scaleX(1);
  }

  /* ===== ðŸ“° Cards styling (kept DXB look) ===== */
  .news-card {
    background: var(--dxb-bg) !important;
    border-radius: 12px;
    overflow: hidden;
    transition: transform 0.28s ease, box-shadow 0.28s ease;
    box-shadow: 0 0 6px rgba(0, 0, 0, 0.06);
  }

  .news-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
  }

  

  .hover-red:hover {
    color: #d32f2f !important;
  }

  .meta-info {
    font-size: 0.82rem;
    color: #6b6b6b;
  }

  /* Slider wrapper */
  .dxbindia-slider {
    position: relative;
    border-radius: 20px;
    overflow: hidden;
  }

  /* Overlay gradient */
  .dxbindia-slide-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0));
    padding: 20px;
  }

  /* Title truncate */
  .text-truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Indicators */
  .carousel-indicators [data-bs-target] {
    background-color: #fff;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    opacity: 0.6;
  }

  .carousel-indicators .active {
    opacity: 1;
  }

  /* Controls */
  .carousel-control-prev-icon,
  .carousel-control-next-icon {
    background-size: 60%, 60%;
  }

  /* ðŸŸ¢ Fix: No white/black blank between slides */
  .carousel-inner {
    position: relative;
    overflow: hidden;
    background: transparent !important;
  }

  /* Slides stay stacked to avoid flicker */
  .carousel-item {
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
    width: 100%;
    display: block;
  }

  .carousel-item.active {
    position: relative;
    opacity: 1;
    z-index: 2;
  }

  /* Image & video fix */
  .carousel-item img,
  .carousel-item video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    background: transparent !important;
  }

  /* Prevent flicker on lazy load */
  .carousel,
  .carousel-item,
  .carousel-inner {
    background: transparent !important;
  }


  .top-stories-widget {
    width: 100%;
    border-radius: 12px;
  }

  .story-item {
    cursor: pointer;

  }



  .story-img {
    width: 110px;
    height: 60px;
    object-fit: cover;
  }

  .hover-title {
    text-decoration: none;
    font-size: 14px !important;

  }

  .hover-title:hover {
    text-decoration: none;
    color: #ed1c24 !important;
  }


  

  /* Tabs Scroll Container */
.tabs-scroll-container {
  overflow-x: auto;
  scroll-behavior: smooth;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE */
}
.tabs-scroll-container::-webkit-scrollbar {
  display: none; /* Chrome, Safari */
}

/* Tabs */
.slick-tabs {
  display: flex;
  gap: 12px;
  white-space: nowrap;
  margin: 0;
  padding: 0;
}
.slick-tabs .nav-link {
  border: none;
  color: #333;
  font-weight: 500;
  position: relative;
  background: none;
}
.slick-tabs .nav-link.active,
.slick-tabs .nav-link:hover {
  color: #d00;
}
.slick-tabs .nav-link::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -6px;
  width: 0;
  height: 2px;
  background: #d00;
  transition: width 0.3s ease;
}
.slick-tabs .nav-link:hover::after,
.slick-tabs .nav-link.active::after {
  width: 100%;
}

/* Arrows */
.scroll-btn {
  position: absolute;
  top: 40%;
  transform: translateY(-50%);
  background: #fff;
  border: none;
  font-size: 1rem;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  box-shadow: 0 0 4px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  z-index: 2;
  transition: all 0.3s ease;
  opacity: 0.5;
  padding: 5px;
 
}
.scroll-btn:hover {
  background: #f8f8f8;
  opacity: 1;
}
.scroll-btn.left {
  left: -10px;
}
.scroll-btn.right {
  right: -10px;
}

.trending-strip {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: #fff;
  border-bottom: 1px solid #eee;
  overflow-x: auto;
  white-space: nowrap;
}

.trending-strip::-webkit-scrollbar {
  display: none;
}

.trending-label {
  color: red;
  font-size: 12px;
  font-weight: 700;
  margin-right: 4px;
}

.trend-pill {
  font-size: 12px;
  padding: 5px 10px;
  background: #f2f2f2;
  color: #fff;
  border-radius: 4px;
  text-decoration: none;
  font-weight: 500;
}

.trend-pill:hover {
  background: #e5e5e5;
   text-decoration: none;
}

.trend-pill.active {
  background: #e60000;
  color: #fff !important;
  text-decoration: none;
}


</style>

{% endblock %}